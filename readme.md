# Собачий питомник   
Платформа "собачий питомник" представляет собой учебный проект, реализованный в рамках курса "веб-программирование с использованием фреймворка Django"

## Содержание    
  
[Разделы](#Разделы)    
[Разворачиваем проект](#Разворачиваем-проект)       
[Создаем пользователей](#Создаем-пользователей)      
[Фикстуры наполняем базу данных](#Фикстуры-наполняем-базу-данных)    
[Разворачиваем Redis](#Разворачиваем-Redis)  
[Запуск приложения и возможности](#Запуск-приложения-и-возможности)    
[Используемые модели](#Используемые-модели)  
[Пагинация и разрешения](#Пагинация-и-разрешения)    
[Используемые представления](#Используемые-представления)  

----
## Разделы   

1. Породы    
2. Собаки      
3. Пользователи      
4. Отзывы    
  
  
----
## Разворачиваем проект    
**ШАГ 1**    
Создаем виртуальное окружение:    
```bash 
python -m venv .venv
```  
  
Устанавливаем необходимые зависимости:  
```bash  
pip install -r requirements.txt       
```  
       
**ШАГ 2**      
Заполняем .env файл согласно файла .env.sample      
    
  
**ШАГ 3**    
Создаем базу данных:  
```bash
python manage.py ccdb  
```  
   
**ШАГ 4**
Создаем миграции:  
```bash
python manage.py makemigrations  
```
  
И применяем их:  
```bash
python manage.py migrate  
```  
  
----
## Создаем пользователей  
Создаем 3-х тестовых пользователей одной командой:  
```bash  
python manage.py ccsu  
```
  
1. Админ: Обладает всеми возможными правами. Имеет доступ в админку.    
2. Модератор: Привелегированный пользователь. Не имеет доступа в админку.    
3. Пользователь: Обычный пользователь.    
  
Учетные данные пользователей для авторизации:  

    admin@myhost.su 
    moderator@myhost.su
    user1@myhost.su

Пароль для всех пользователей:

    qwerty

----
## Наполняем базу данных
Пользователи  
```bash
python manage.py loaddata users.json
```  
  
Собаки
```bash 
python manage.py loaddata dogs.json
```  


----
## Разворачиваем Redis 
Redis уже развернут в docker-контейнере на удаленном сервере.
Настройки подключения к Redis уже прописаны в config/settings.py


----
## Запуск приложения и возможности
Запускаем приложение:  
```bash 
python manage.py runserver
```

Возможности:

- Авторизация под существующими пользователями
- Регистрация новых пользователей с email-уведомлением о регистрации
- Редактирование существующего пользователя 
- Генерация нового пароля и отправка нового пароля на email
- Работа с привилегиями
- Добавление новых собак и редактирование существующих
- Активация и деактивация собак
- Создание и редактирование отзывов о собаках 
- Активация и деактивация отзывов
- Счетчик просмотра собак с email-уведомлением о просмотрах
- Поиск по собакам
- Поиск по породам


----
## Используемые модели  

Модель Breeds:    

    - name          - название породы  
    - description   - описание породы  

Модель Dogs:   

    - name          - имя собаки   
    - breed         - порода собаки  
    - photo         - фотография собаки  
    - birth_date    - дата рождения собаки  
    - is_active     - активна ли карточка собаки или деактивирована  
    - owner         - владелец собаки  
    - views         - количество просмотров карточки собаки  

Модель DogParent:

    - dog           - имя собаки, к которой относится родитель  
    - name          - имя родителя  
    - breed         - порода собаки  
    - birth_date    - дата рождения собаки   

Модель Reviews:  

    - title            - заголовок отзыва  
    - slug             - строка для создания ссылок   
    - content          - содержание отзыва  
    - created          - дата написания отзыва  
    - sign_of_review   - состояние отзыва (активное\неактивное)  
    - author           - автор отзыва  
    - dog              - имя собаки  

Модель Users:

    - email            - адрес электронной почты  
    - role             - привелегии пользователя (администратор/модератор/пользователь)  
    - first_name       - имя пользователя   
    - last_name        - фамилия пользователя      
    - phone            - телефон пользователя    
    - telegram         - телеграм пользователя    
    - avatar           - аватар пользователя  
    - is_active        - активность пользователя  


----
## Пагинация и разрешения  
**Разрешения (Permissions)**    
В проекте реализованы кастомные разрешения для ролей: ADMIN, MODERATOR, USER.  
Используются стандартные механизмы Django для назначения прав пользователям и группам.  
Через административную панель можно:  
  
    - Создавать группы пользователей;  
    - Назначать группам набор прав (permissions);  
    - Добавлять пользователей в группы и тем самым автоматически наделять их соответствующими правами.  

**Пагинация (Pagintation)**  
Пагинация реализована для:    

    - Страницы списка доступных пород      
    - Страницы списка активных собак    
    - Страницы списка неактивных собак     
    - Страницы списка пользователей    
  
На одной странице отображается не более, чем 3 карточки.      
  
  
----
## Используемые представления

### Приложение dogs    
   
Views модели Breed    
    
**IndexView**  
CBV - управляет отображением главной страницы проекта.  
  
**BreedListView**  
CBV - управляет отображением страницы списка карточек пород.  
  
**BreedSearchListView**   
CBV - управляет отображением страницы вывода результатов поиска по породам собак.  
  
Views модели Dog     
  
**DogBreedListView**  
CBV - управляет отображением страницы вывода карточек собак выбранной породы.  
  
**DogListView**    
CBV - управляет отображением страницы вывода списка активных карточек собак.   
  
**DogDeactivatedListView**  
CBV - управляет отображением страницы вывода списка неактивных карточек собак.  
  
**DogSearchListView**   
CBV - управляет отображением страницы вывода результатов поиска по именам собак.  
  
**BreedDogSearchListView**  
CBV - управляет отображением страницы вывода результатов комбинированого поиска: по породам и именам собак.  
  
**DogCreateView**  
CBV - управляет отображением страницы добавления новой карточки собаки.  
  
**DogDetailView**  
CBV - управляет отображением страницы детальной информации о собаке.  
  
**DogUpdateView**  
CBV - управляет отображенеим страницы редактирования карточки существующей собаки.  
  
**DogDeleteView**  
CBV - упралвяет отображенем страницы удаления карточки собаки.  
  
### Приложение reviews  

Views модели Review   

**ReviewListView**  
CBV - упралвяет отображенем страницы всех карточек отзывов 
  
**ReviewDeactivatedListView**  
CBV - упралвяет отображенем страницы карточек неактивных отзывов
  
**ReviewCreateView**  
CBV - упралвяет отображенем страницы добавления новой карточки отзыва
  
**ReviewDetailView**   
CBV - упралвяет отображенем страницы детальной информации об отзыве  
  
**ReviewUpdateView**    
CBV - упралвяет отображенем страницы редактирования карточки отзыва   
    
**ReviewDeleteView**    
CBV - упралвяет отображенем страницы удаления карточки отзыва  
    
### Приложение users  
  
Views модели User   

**UserRegisterView**    
CBV - упралвяет отображенем страницы регистрации пользователя    
  
**UserLoginView**    
CBV - упралвяет отображенем страницы логинки  
  
**UserProfileView**    
CBV - упралвяет отображенем страницы просмотра информации и редактирования собственного пользователя  
   
**UserUpdateView**    
CBV - упралвяет отображенем страницы редактирования профиля    
    
**UserPasswordChangeView**    
CBV - упралвяет отображенем страницы смены пароля пользователя  
  
**UserLogoutView**  
CBV - упралвяет отображенем страницы выхода из аккаунта пользователя  
  
**UserListView**  
CBV - упралвяет отображенем страницы списка пользователей  
  
**UserDetailView**  
CBV - упралвяет отображенем страницы информации профиля любого пользователя  
  
**user_generate_new_password_view**  
FBV - упралвяет генерацией нового пароля для текущего авторизованного пользователя    

